function PromotionItem(t){this.init(t),this.render(),this.countDownTime()}$(function(){$.ajax({url:"/api/promotions/one_money/1/items",data:{},success:function(t){console.log(t),t.map(function(t){new PromotionItem(t)})}})}),PromotionItem.prototype={init:function(t){var s=["avatar_urls","cover_urls","image_urls"],n=["start_at","end_at"];for(var a in t){var i=t[a];s.indexOf(a)>-1&&(i=JSON.parse(i)),n.indexOf(a)>-1&&(i=Date.parse(i)),this[a]=i}},getStatus:function(){return this.status?this.status:Date.now()<this.start_at?"wait":Date.now()>this.end_at?"expired":this.total_amount<1?"shortage":"sale"},countDownTime:function(){var t=$(".promotion-item[name="+this.id+"] .count-time");new CountDown(t,+this.total_amount,this.start_at,this.end_at)},changeStatus:function(){},statusFlagTemplate:function(){switch(this.getStatus()){case"wait":return'<span class="status wait">未开始</span>';case"expired":return'<span class="status end">已结束</span>';case"shortage":return'<span class="status end">已售罄</span>';default:return'<span class="status">进行中</span>'}},template:function(){return'<li class="promotion-item" name='+this.id+'>\n              <a class="item-wrap" href="detail.html?one_money_id='+this.one_money_id+"&id="+this.id+'">                <header>\n                  '+this.statusFlagTemplate()+'\n                  <img src="'+this.cover_urls[0]+'">\n                  <div class="limit">\n                    <span class="count-time"></span>\n                  </div>\n                </header>\n                <main>\n                  <p class="title">'+this.title+'</p>\n                  <hr>\n                  <div class="price-wrap">\n                    <span class="now-price">￥'+this.price+'</span>\n                    &emsp;<s class="origin-price">￥'+this.ori_price+"</s>\n                  </div>\n                </main>\n              </a>\n            </li>"},render:function(t){var t=t||$(".promotions-list");t.append(this.template())}};