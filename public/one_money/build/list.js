function PromotionItem(t){this.init(t),this.render(),this.countDownTime()}$(function(){$.ajax({url:"/api/promotions/one_money/1/items",success:function(t){console.log(t),t.map(function(t){new PromotionItem(t)})},error:function(t){$("body").append(t.responseText)}})}),PromotionItem.prototype={init:function(t){var s=["avatar_urls","cover_urls","image_urls"],a=["start_at","end_at"];for(var i in t){var n=t[i];s.indexOf(i)>-1&&(n=JSON.parse(n)),a.indexOf(i)>-1&&(n=Date.parse(n)),this[i]=n}},getStatus:function(){return this.status?this.status:Date.now()<this.start_at?"wait":Date.now()>this.end_at?"expired":this.total_amount<1?"shortage":"sale"},countDownTime:function(){var t=$(".promotion-item[name="+this.id+"] .count-time");new CountDown(t,+this.total_amount,this.start_at,this.end_at)},changeStatus:function(){},statusFlagTemplate:function(){switch(this.getStatus()){case"wait":return'<span class="status wait">未开始</span>';case"expired":return'<span class="status end">已结束</span>';case"shortage":return'<span class="status end">已售罄</span>';default:return'<span class="status">进行中</span>'}},template:function(){return'<li class="promotion-item" name='+this.id+'>              <a class="item-wrap" href="detail.html?one_money_id='+this.one_money_id+"&id="+this.id+'">                <header>                  '+this.statusFlagTemplate()+'                  <img src="'+this.cover_urls[0]+'">                  <div class="limit">                    <span class="count-time"></span>                  </div>                </header>                <main>                  <p class="title">'+this.title+'</p>                  <hr>                  <div class="price-wrap">                    <span class="now-price">￥'+this.price+'</span>                    &emsp;<s class="origin-price">￥'+this.ori_price+"&nbsp;</s>                  </div>                </main>              </a>            </li>"},render:function(t){var t=t||$(".promotions-list");t.append(this.template())}};