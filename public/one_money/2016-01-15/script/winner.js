function getQueryParams(){var t,n=location.search,a=location.href;t=n?n.slice(1):a.split("?")[1];for(var e={},r=t.split("&"),i=0;i<r.length;i++){var s=r[i].split("="),o=s[0],p=s[1];e[o]=p}return e}function Winner(t){for(var n in t)this[n]=t[n];this.render()}var params=getQueryParams();$.ajax({url:"/api/promotions/one_money/"+params.one_money_id+"/status/"+params.id+"?winners=10",success:function(t){var n=t.completes,a=t.total_amount,e=t.participant_count,r=t.winner_count,i=r+e||0,s=t.winners||[];$(".participant-amonut .amount").text(i),$(".status-wrap .sold span").text(n),$(".total-amount .inventory").text(a-n),s.length&&($(".users-list").append('<div class="title">幸运用户</div>'),s.map(function(t){new Winner(t)}))}}),Winner.prototype={template:function(){return'<img src="'+(this.avatar_url||window.default_avatar)+'"/>'},render:function(){$(".users-list").append(this.template())}};