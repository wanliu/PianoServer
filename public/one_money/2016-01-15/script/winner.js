$(function(){function t(){var t,n=location.search,a=location.href;t=n?n.slice(1):a.split("?")[1];for(var e={},i=t.split("&"),o=0;o<i.length;o++){var r=i[o].split("="),s=r[0],c=r[1];e[s]=c}return e}function n(t){for(var n in t)this[n]=t[n];this.render()}$.ajaxSetup({type:"GET",headers:{"cache-control":"no-cache"}});var a=t();$.ajax({url:"/api/promotions/one_money/"+a.one_money_id+"/status/"+a.id+"?winners=10",cache:!1,success:function(t){var a=t.completes,e=t.total_amount,i=t.participant_count,o=t.winner_count,r=o+i||0,s=t.winners||[];$(".participant-amonut .amount").text(r),$(".status-wrap .sold span").text(a),$(".total-amount .inventory").text(e-a),s.length&&($(".users-list").append('<div class="title">幸运用户</div>'),s.map(function(t){new n(t)}))}}),n.prototype={template:function(){return'<img src="'+(this.avatar_url||window.default_avatar)+'"/>'},render:function(){$(".users-list").append(this.template())}}});